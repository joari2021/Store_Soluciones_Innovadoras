<%= turbo_frame_tag "modal-peliculas" do%>
  <!--Data-->
  <span class="d-none" id="namePelicula"><%= @pelicula.name %></span>
  <span class="d-none" id="imageBackdroupUrl"><%= @pelicula.backdrop_image.present? ? url_for(@pelicula.backdrop_image) : 'placeholder.jpg' %></span>
  <!-- ·
  #
  #
  --->
  <div class="row modal-content-overlay info-pelicula" data-controller="modal-show-pelicula">
    <div class="col-md-4">
      <%= image_tag @pelicula.poster, class: "img-fluid", alt: @pelicula.name if @pelicula.poster.attached? %>
    </div>
    <div class="col-md-8">
      <span><strong>Otros titulos:</strong> <%= @pelicula.others_titles.present? ? @pelicula.others_titles : "N/A" %></span><br>
      <strong>Promedio Ranking:</strong> <%= number_with_precision(@pelicula.promedio_ranking, precision: 2) %><br>
      <strong>Clasificacion:</strong> <%= @pelicula.clasification %> (<%= @pelicula.clasification_description %>) <br>
      <strong>Fecha Estreno:</strong> <%= @pelicula.date_estreno.strftime("%d / %m / %Y") %><br>
      <strong>Duración:</strong> <%= @pelicula.duration_hours %>h <%= @pelicula.duration_minutes %>m<br>
      <strong>Director:</strong> <%= @pelicula.director %><br>
      <strong>Reparto:</strong> <%= @pelicula.reparto %><br>
      <strong>Codigo:</strong> <%= @pelicula.codigo %><br>
      <strong>Link del Trailer:</strong> <%= link_to "Ver Trailer", @pelicula.link_trailer, class: "ms-2 btn btn-outline-info", id: "botonVentanaModal" %><br>
    </div>
    <div class="mt-3">
      <strong>Generos:</strong>
      <% @pelicula.generos.order(:orden).each do |genero| %>
        <span class="badge rounded-pill bg-info text-white ms-2"><%= genero.name %></span>
      <% end %><br>
      <p class="mt-2"><strong>Sinopsis:</strong><%= simple_format(@pelicula.sinopsis) %></p>
    </div>
  </div>
  <% if Current.user&.admin?%>
    <div class="top-right-buttons d-flex mt-3">
      <%= link_to edit_pelicula_path(@pelicula), remote: true, method: :get, class: "btn btn-info me-2 text-white", data: { turbo_frame: "edit-pelicula-frame"} do %>
        <i class="ri-edit-box-fill"></i>
      <% end %>
      <%= button_to @pelicula, method: :delete, data: { confirm: "Are you sure?" }, class:"btn btn-danger" do %>
        <i class="ri-delete-bin-5-fill"></i>
      <%end%>
    </div>
  <% end %>
  <!-- MODAL DE TRAILER DE PELICULA-->
  <div class="modal fade" id="ventanaModal" tabindex="-1" role="dialog" aria-labelledby="ventanaModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header bg-dark text-info f-bold">
          <h5 class="modal-title" id="ventanaModalLabel">Trailer</h5>
          <button type="button" class="btn-close bg-info" data-bs-dismiss="modal" aria-label="Close" id="btn_closed_modal_trailer"></button>
        </div>
        <div class="modal-body">
          <div class="embed-responsive embed-responsive-4by3">
            <iframe id="iframeVideo" width="100%" height="580px" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
<%end%>
