<div class="row modal-content-overlay info-pelicula" data-controller="modal-form-pelicula">
  <%= form_with(model: pelicula, local: false, data: { visit: @editing, controller: "form-peliculas" }, id: "form-peliculas") do |form| %>
    <% if pelicula.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(pelicula.errors.count, "error") %> prohibited this pelicula from being saved:</h2>
        <ul>
          <% pelicula.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <div class="mb-3">
      <%= form.label :poster, "Poster Pelicula", class: "form-label" %>
      <%= form.file_field :poster, class:"form-control form-control-sm" %>
    </div>
    <div class="mb-3">
      <%= form.label :backdrop_image, "Link Imagen Backdrop Pelicula", class: "form-label" %>
      <%= form.text_field :backdrop_image, class:"form-control form-control-sm" %>
    </div>
    <div class="mb-3">
      <%= form.label :name, "Titulo", class: "form-label" %>
      <%= form.text_field :name, class:"form-control" %>
    </div>
    <div class="mb-3">
      <%= form.label :others_titles, "Otros Titulos", class: "form-label" %>
      <%= form.text_field :others_titles, class:"form-control" %>
    </div>
    <div class="mb-3">
      <%= form.label :date_estreno, "Fecha de Estreno" %>
      <div class="form-row">
        <%= form.date_select :date_estreno, { order: [:day, :month, :year], prompt: { day: 'Día', month: 'Mes', year: 'Año' }, start_year: Date.today.year, end_year: 1900 }, class: "form-control-inline custom-date-select" %>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-6">
        <%= form.label :duration_hours, "Horas de Duración", class: "form-label" %>
        <%= form.number_field :duration_hours, class: "form-control" %>
      </div>
      <div class="col-6">
        <%= form.label :duration_minutes, "Minutos de Duración", class: "form-label" %>
        <%= form.number_field :duration_minutes, class: "form-control" %>
      </div>
    </div>
    <div class="mb-3">
      <%= form.label :link_trailer, "Link del Trailer", class: "form-label" %>
      <%= form.text_field :link_trailer, class:"form-control" %>
    </div>
    <div class="mb-3">
      <%= form.label :director, "Director", class: "form-label" %>
      <%= form.text_field :director, class:"form-control" %>
    </div>
    <div class="mb-3">
      <%= form.label :reparto, "Reparto", class: "form-label" %>
      <%= form.text_field :reparto, class:"form-control" %>
    </div>
    <div class="mb-3">
    </div>
    <h6>Detalles de Videos</h6>
    <div id="video_details">
      <%= form.fields_for :video_details do |vd| %>
        <%= render "video_detail_fields", vd: vd %>
      <% end %>
    </div>
    <%= link_to_add_video_details "Añadir Detalle De Video", form, :video_details %>
    <hr>
    <div class="mb-3">
      <%= form.label :sinopsis, "Sinopsis", class:"form-label" %>
      <%= form.text_area :sinopsis, class:"form-control", rows: 10 %>
    </div>
    <h6>Puntuaciones</h6>
    <div id="rankings">
      <%= form.fields_for :rankings do |pf| %>
        <%= render "ranking_fields", pf: pf%>
      <% end %>
    </div>
    <%= link_to_add_rankings "Añadir Ranking", form, :rankings %>
    <hr>
    <div class="mb-3">
      <span>Generos:</span>
      <br>
      <br>
      <div class="row mb-3">
        <%= form.hidden_field :genero_ids_order, id: "genero_ids_order", value: pelicula.generos.order('generos_peliculas.orden').pluck(:id).join(",") %>
        <%= form.collection_check_boxes(:genero_ids, Genero.all, :id, :name) do |b| %>
          <div class="collection-check-box mb-1 col-6">
            <%= b.check_box(class: "form-check-input", data: { index: b.object.id }, checked: pelicula.genero_ids.include?(b.object.id)) %>
            <%= b.label(class: "form-check-label") %>
          </div>
        <% end %>
      </div>
    </div>
    <div class="mb-3">
      <%= form.label :clasification, "Clasificación", class: "form-label" %>
      <%= form.select :clasification, options_for_select([["AA (Niños)", "AA"], ["A (Todo Público)", "A"], ["B (12+)", "B"], ["C (18+)", "C"], ["D (18X)", "D"], ["E (X)", "E"]], selected: pelicula.clasification), {}, class: "form-select" %>
    </div>
    <div class="mb-3">
      <%= form.label :codigo, "Codigo", class: "form-label" %>
      <%= form.select :codigo, options_for_select([["DscP1", "DscP1"], ["DscAD", "DscAD"]], selected: pelicula.codigo), {}, class: "form-select" %>
    </div>
    <div class="mb-3">
      <%= form.label :disponible, "Disponible", class: "form-label" %>
      <%= form.select :disponible, options_for_select([["SI", true], ["NO", false]], selected: pelicula.disponible), {}, class: "form-select" %>
    </div>
    <div class="actions">
      <%= form.submit "Guardar", class: "btn btn-info" %>
    </div>
  <% end %>
</div>
